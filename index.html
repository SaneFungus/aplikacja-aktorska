<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio - Twoja Przestrzeń Aktorska</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            background-color: rgba(99, 102, 241, 0.1);
        }
        .nav-btn.active {
            background-color: rgba(99, 102, 241, 0.2);
        }
        .emotion-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .emotion-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .plutchik-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: bold;
            margin-left: 8px;
        }
        .plutchik-emotion {
            border-left: 4px solid #f5576c;
            background: linear-gradient(to right, rgba(245, 87, 108, 0.05), transparent);
        }
    </style>
</head>
<body class="h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md h-full max-h-[800px] bg-gray-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col relative border-4 border-gray-700">
        
        <header class="bg-gray-900/50 backdrop-blur-sm p-4 text-center z-10 flex-shrink-0">
            <h1 id="header-title" class="text-xl font-bold text-white">Kokpit</h1>
        </header>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto relative">
            
            <!-- Kokpit / Home Screen -->
            <div id="screen-home" class="screen active p-6 space-y-6">
                <h2 class="text-2xl font-semibold text-white">Witaj w Studio!</h2>
                <p class="text-gray-400">Twoja przestrzeń do eksploracji emocji, ciała i rzemiosła aktorskiego.</p>

                <div class="bg-gray-700/50 p-5 rounded-xl">
                    <h3 class="font-bold text-lg mb-2 text-indigo-400"><i class="fa-solid fa-star-of-life mr-2"></i>Ćwiczenie na dziś</h3>
                    <div id="daily-exercise">
                        <p class="text-gray-400">Ładowanie propozycji...</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-4">
                     <button onclick="navigateTo('thesaurus')" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-5 rounded-lg text-left transition-transform transform hover:scale-105">
                        <i class="fa-solid fa-book-open w-6 mr-2"></i>Słownik Emocji
                        <p class="text-sm font-normal text-indigo-200 mt-1">Przeglądaj i analizuj <strong>63 emocje</strong> z koła Plutchika i nie tylko.</p>
                    </button>
                    <button onclick="navigateTo('improvisation')" class="bg-teal-600 hover:bg-teal-500 text-white font-bold py-4 px-5 rounded-lg text-left transition-transform transform hover:scale-105">
                         <i class="fa-solid fa-masks-theater w-6 mr-2"></i>Generator Improwizacji
                         <p class="text-sm font-normal text-teal-200 mt-1">Otrzymuj losowe scenariusze i emocje.</p>
                    </button>
                    <button onclick="navigateTo('physical')" class="bg-rose-600 hover:bg-rose-500 text-white font-bold py-4 px-5 rounded-lg text-left transition-transform transform hover:scale-105">
                        <i class="fa-solid fa-person-running w-6 mr-2"></i>Laboratorium Fizyczne
                        <p class="text-sm font-normal text-rose-200 mt-1">Łącz ruch z abstrakcyjnymi emocjami.</p>
                    </button>
                </div>
            </div>

            <!-- Słownik Emocji Screen -->
            <div id="screen-thesaurus" class="screen p-6 space-y-4">
                 <div class="relative flex-shrink-0">
                    <input type="text" id="emotion-search" placeholder="Szukaj emocji..." class="w-full bg-gray-700 border border-gray-600 rounded-lg py-2 px-4 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <i class="fa-solid fa-search absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                <div class="text-xs text-gray-400 bg-gray-700/30 p-2 rounded flex items-center gap-2">
                    <span class="plutchik-badge" style="margin-left: 0;">PLUTCHIK</span>
                    <span>= Podstawowe emocje z koła Plutchika</span>
                </div>
                <div id="emotion-list" class="space-y-3 overflow-y-auto flex-1">
                    <!-- Emotion items will be loaded here -->
                </div>
            </div>
             <!-- Detail view for a single emotion -->
            <div id="screen-thesaurus-detail" class="screen p-6 space-y-4">
                <!-- Content will be loaded here -->
            </div>

            <!-- Generator Improwizacji Screen -->
            <div id="screen-improvisation" class="screen p-6">
                <div class="flex flex-col h-full">
                    <div id="impro-card" class="bg-gray-700/80 p-6 rounded-2xl w-full shadow-lg flex-grow mb-4 overflow-y-auto">
                        <h3 id="impro-title" class="text-xl font-bold text-teal-400 mb-2"></h3>
                        <p id="impro-scenario" class="text-gray-300 mb-4"></p>
                        <div class="bg-teal-900/30 p-4 rounded-lg">
                            <p class="text-sm text-teal-300 mb-1"><i class="fa-solid fa-heart mr-2"></i>Emocja do Zagrania:</p>
                            <p id="impro-emotion" class="text-2xl font-bold text-white"></p>
                        </div>
                    </div>
                    <button onclick="generateImprovisation()" class="bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                        <i class="fa-solid fa-dice mr-2"></i>Losuj Nową Improwizację
                    </button>
                </div>
            </div>

            <!-- Laboratorium Fizyczne Screen -->
            <div id="screen-physical" class="screen p-6">
                <div class="flex flex-col h-full">
                    <div class="bg-gray-700/80 p-6 rounded-2xl w-full shadow-lg flex-grow mb-4 overflow-y-auto">
                        <h3 class="text-xl font-bold text-rose-400 mb-4">Twoje Wyzwanie Fizyczne</h3>
                        <div id="physical-challenge" class="space-y-4">
                            <p class="text-gray-400">Kliknij przycisk poniżej, aby wygenerować ćwiczenie fizyczne połączone z emocją.</p>
                        </div>
                    </div>
                    <button onclick="generatePhysicalExercise()" class="bg-rose-600 hover:bg-rose-500 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                        <i class="fa-solid fa-dumbbell mr-2"></i>Generuj Ćwiczenie
                    </button>
                </div>
            </div>

        </main>

        <!-- Bottom Navigation -->
        <nav class="bg-gray-900/50 backdrop-blur-sm mt-auto flex justify-around p-1 flex-shrink-0">
            <button onclick="navigateTo('home')" id="nav-home" class="nav-btn active flex-1 text-indigo-400 p-3 rounded-xl">
                <i class="fa-solid fa-house text-xl"></i>
                <span class="text-xs block">Kokpit</span>
            </button>
            <button onclick="navigateTo('thesaurus')" id="nav-thesaurus" class="nav-btn flex-1 text-gray-400 p-3 rounded-xl">
                <i class="fa-solid fa-book-open text-xl"></i>
                 <span class="text-xs block">Słownik</span>
            </button>
            <button onclick="navigateTo('improvisation')" id="nav-improvisation" class="nav-btn flex-1 text-gray-400 p-3 rounded-xl">
                 <i class="fa-solid fa-masks-theater text-xl"></i>
                 <span class="text-xs block">Impro</span>
            </button>
            <button onclick="navigateTo('physical')" id="nav-physical" class="nav-btn flex-1 text-gray-400 p-3 rounded-xl">
                <i class="fa-solid fa-person-running text-xl"></i>
                 <span class="text-xs block">Lab</span>
            </button>
        </nav>
    </div>

    <script>
        const screens = document.querySelectorAll('.screen');
        const mainContent = document.querySelector('main');
        const navButtons = document.querySelectorAll('.nav-btn');
        const headerTitle = document.getElementById('header-title');
        let database = {};

        const screenTitles = {
            'home': 'Kokpit',
            'thesaurus': 'Słownik Emocji',
            'thesaurus-detail': 'Szczegóły Emocji',
            'improvisation': 'Generator Improwizacji',
            'physical': 'Laboratorium Fizyczne'
        };

        // Koło Plutchika - pierwsze 8 emocji
        const plutchikEmotions = ['RADOŚĆ', 'GNIEW', 'STRACH', 'SMUTEK', 'ZASKOCZENIE', 'WSTRĘT', 'AKCEPTACJA', 'PODZIW'];

        async function loadDatabase() {
            try {
                const response = await fetch('./database.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                database = await response.json();
                initializeApp();
            } catch (e) {
                console.error("Nie udało się załadować bazy danych:", e);
                document.getElementById('daily-exercise').innerHTML = '<p class="text-red-400">Błąd ładowania bazy danych. Sprawdź, czy plik database.json istnieje.</p>';
            }
        }

        function initializeApp() {
            loadEmotionList();
            generateDailyExercise();
            generateImprovisation();
            
            // Setup search
            const searchInput = document.getElementById('emotion-search');
            searchInput.addEventListener('input', (e) => {
                filterEmotions(e.target.value);
            });
        }

        function loadEmotionList(filterText = '') {
            const emotionList = document.getElementById('emotion-list');
            emotionList.innerHTML = '';

            const emotions = database.emotionsDatabase || [];
            const filtered = filterText 
                ? emotions.filter(e => e.name.toLowerCase().includes(filterText.toLowerCase()))
                : emotions;

            filtered.forEach((emotion, index) => {
                const isPlutchik = plutchikEmotions.includes(emotion.name);
                const emotionCard = document.createElement('div');
                emotionCard.className = `emotion-card bg-gray-700/50 p-4 rounded-lg hover:bg-gray-700 ${isPlutchik ? 'plutchik-emotion' : ''}`;
                emotionCard.onclick = () => showEmotionDetail(emotion);
                
                emotionCard.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center flex-1">
                            <h3 class="text-lg font-bold text-white">${emotion.name}</h3>
                            ${isPlutchik ? '<span class="plutchik-badge">PLUTCHIK</span>' : ''}
                        </div>
                        <i class="fa-solid fa-chevron-right text-gray-400"></i>
                    </div>
                    <p class="text-sm text-gray-400 mt-1">${emotion.definition}</p>
                `;
                
                emotionList.appendChild(emotionCard);
            });

            if (filtered.length === 0) {
                emotionList.innerHTML = '<p class="text-gray-400 text-center py-8">Nie znaleziono emocji pasujących do wyszukiwania.</p>';
            }
        }

        function filterEmotions(searchText) {
            loadEmotionList(searchText);
        }

        function showEmotionDetail(emotion) {
            navigateTo('thesaurus-detail');
            
            const detailScreen = document.getElementById('screen-thesaurus-detail');
            const isPlutchik = plutchikEmotions.includes(emotion.name);
            
            detailScreen.innerHTML = `
                <button onclick="navigateTo('thesaurus')" class="text-indigo-400 hover:text-indigo-300 mb-4 flex items-center">
                    <i class="fa-solid fa-arrow-left mr-2"></i>Powrót do listy
                </button>
                
                <div class="bg-gray-700/50 p-6 rounded-xl space-y-6">
                    <div>
                        <div class="flex items-center gap-2 mb-2">
                            <h2 class="text-3xl font-bold text-white">${emotion.name}</h2>
                            ${isPlutchik ? '<span class="plutchik-badge">PLUTCHIK</span>' : ''}
                        </div>
                        <p class="text-gray-300 italic">${emotion.definition}</p>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-indigo-400 mb-2"><i class="fa-solid fa-user mr-2"></i>Fizyczne Sygnały</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-1 text-sm">
                            ${emotion.physicalSignals.slice(0, 5).map(signal => `<li>${signal}</li>`).join('')}
                            ${emotion.physicalSignals.length > 5 ? `<li class="text-gray-500">...i ${emotion.physicalSignals.length - 5} więcej</li>` : ''}
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-teal-400 mb-2"><i class="fa-solid fa-heart-pulse mr-2"></i>Wewnętrzne Odczucia</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-1 text-sm">
                            ${emotion.internalSensations.map(sensation => `<li>${sensation}</li>`).join('')}
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-rose-400 mb-2"><i class="fa-solid fa-brain mr-2"></i>Odpowiedzi Mentalne</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-1 text-sm">
                            ${emotion.mentalResponses.slice(0, 4).map(response => `<li>${response}</li>`).join('')}
                            ${emotion.mentalResponses.length > 4 ? `<li class="text-gray-500">...i ${emotion.mentalResponses.length - 4} więcej</li>` : ''}
                        </ul>
                    </div>

                    <div class="bg-orange-900/20 p-4 rounded-lg border border-orange-800/30">
                        <h3 class="text-lg font-semibold text-orange-400 mb-2"><i class="fa-solid fa-fire mr-2"></i>Reakcje Ostre</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-1 text-sm">
                            ${emotion.cuesAcute.map(cue => `<li>${cue}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="bg-blue-900/20 p-4 rounded-lg border border-blue-800/30">
                        <h3 class="text-lg font-semibold text-blue-400 mb-2"><i class="fa-solid fa-clock mr-2"></i>Skutki Długoterminowe</h3>
                        <ul class="list-disc list-inside text-gray-300 space-y-1 text-sm">
                            ${emotion.cuesLongTerm.map(cue => `<li>${cue}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="bg-purple-900/20 p-4 rounded-lg border border-purple-800/30">
                        <h3 class="text-lg font-semibold text-purple-400 mb-3"><i class="fa-solid fa-lightbulb mr-2"></i>Propozycje dla Aktora</h3>
                        <div class="space-y-2">
                            ${emotion.actorPrompts.map((prompt, i) => `
                                <div class="bg-gray-800/50 p-3 rounded">
                                    <span class="text-purple-400 font-bold">${i + 1}.</span>
                                    <span class="text-gray-300 text-sm">${prompt}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function generateDailyExercise() {
            const emotions = database.emotionsDatabase || [];
            if (emotions.length === 0) return;

            const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
            const randomPrompt = randomEmotion.actorPrompts[Math.floor(Math.random() * randomEmotion.actorPrompts.length)];

            document.getElementById('daily-exercise').innerHTML = `
                <p class="text-white font-semibold mb-2">Emocja: <span class="text-indigo-300">${randomEmotion.name}</span></p>
                <p class="text-gray-300 text-sm">${randomPrompt}</p>
                <button onclick="generateDailyExercise()" class="mt-3 text-xs bg-indigo-600 hover:bg-indigo-500 text-white py-1 px-3 rounded">
                    <i class="fa-solid fa-refresh mr-1"></i>Losuj ponownie
                </button>
            `;
        }

        function generateImprovisation() {
            const emotions = database.emotionsDatabase || [];
            if (emotions.length === 0) return;

            const scenarios = [
                "Jesteś w windzie, która nagle się zatrzymała.",
                "Spotykasz kogoś, kogo nie widziałeś od 10 lat.",
                "Odkrywasz tajemniczy list w starej książce.",
                "Twój telefon dzwoni - to numer, którego nie rozpoznajesz.",
                "Budzisz się w nieznajomym miejscu.",
                "Ktoś puka do twoich drzwi o 3 w nocy.",
                "Znajdujesz coś wartościowego na ulicy.",
                "Słyszysz rozmowę, której nie powinieneś usłyszeć.",
                "Twój najlepszy przyjaciel prosi cię o dziwną przysługę.",
                "Dostajesz zaproszenie na wydarzenie, o którym nic nie wiesz.",
                "Twoje zwierzę zaczyna zachowywać się dziwnie.",
                "Ktoś oskarża cię o coś, czego nie zrobiłeś.",
                "Znajdujesz stary pamiętnik w domu babci.",
                "Twój szef wzywa cię do pilnego spotkania.",
                "Widzisz, jak ktoś potrzebuje pomocy na ulicy."
            ];

            const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
            const randomScenario = scenarios[Math.floor(Math.random() * scenarios.length)];

            document.getElementById('impro-title').textContent = "Twoja Scena";
            document.getElementById('impro-scenario').textContent = randomScenario;
            document.getElementById('impro-emotion').textContent = randomEmotion.name;
        }

        function generatePhysicalExercise() {
            const emotions = database.emotionsDatabase || [];
            if (emotions.length === 0) return;

            const exercises = [
                { name: "Chodzenie", desc: "Poruszaj się po przestrzeni, wyrażając emocję całym ciałem" },
                { name: "Zamrożenie", desc: "Zastyganie w pozycji wyrażającej emocję" },
                { name: "Sekwencja ruchowa", desc: "Stwórz 5-cio elementową sekwencję ruchów dla tej emocji" },
                { name: "Transformacja", desc: "Przejdź powoli od neutralności do pełnej ekspresji emocji" },
                { name: "Zoomowanie", desc: "Wyraź emocję najpierw małymi, potem coraz większymi ruchami" },
                { name: "Taniec emocji", desc: "Pozwól ciału spontanicznie tańczyć tę emocję" },
                { name: "Lustro", desc: "Pracuj z partnerem - jeden prowadzi, drugi naśladuje" },
                { name: "Poziomy", desc: "Wyraź emocję na różnych poziomach: leżąc, klęcząc, stojąc" }
            ];

            const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
            const randomExercise = exercises[Math.floor(Math.random() * exercises.length)];
            const randomSignal = randomEmotion.physicalSignals[Math.floor(Math.random() * randomEmotion.physicalSignals.length)];

            document.getElementById('physical-challenge').innerHTML = `
                <div class="bg-rose-900/30 p-4 rounded-lg">
                    <h4 class="text-rose-400 font-bold mb-2"><i class="fa-solid fa-dumbbell mr-2"></i>${randomExercise.name}</h4>
                    <p class="text-gray-300 text-sm mb-3">${randomExercise.desc}</p>
                </div>
                
                <div class="bg-gray-800/50 p-4 rounded-lg">
                    <p class="text-white font-semibold mb-2">Emocja: <span class="text-rose-400">${randomEmotion.name}</span></p>
                    <p class="text-gray-400 text-sm mb-3">${randomEmotion.definition}</p>
                </div>

                <div class="bg-purple-900/30 p-4 rounded-lg">
                    <h4 class="text-purple-400 font-bold mb-2"><i class="fa-solid fa-bullseye mr-2"></i>Fokus fizyczny</h4>
                    <p class="text-gray-300 text-sm">${randomSignal}</p>
                </div>

                <div class="bg-gray-700/50 p-4 rounded-lg mt-4">
                    <h4 class="text-gray-300 font-bold mb-2"><i class="fa-solid fa-clock mr-2"></i>Czas trwania</h4>
                    <p class="text-gray-400 text-sm">Pracuj z tą emocją przez 5-10 minut, eksplorując różne możliwości ruchu.</p>
                </div>
            `;
        }

        function navigateTo(screenName) {
            // Hide all screens
            screens.forEach(screen => screen.classList.remove('active'));
            
            // Show target screen
            const targetScreen = document.getElementById(`screen-${screenName}`);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }

            // Update header
            headerTitle.textContent = screenTitles[screenName] || 'Studio';

            // Update navigation buttons
            navButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.classList.remove('text-indigo-400', 'text-teal-400', 'text-rose-400');
                btn.classList.add('text-gray-400');
            });

            const activeNav = document.getElementById(`nav-${screenName.split('-')[0]}`);
            if (activeNav) {
                activeNav.classList.add('active');
                activeNav.classList.remove('text-gray-400');
                
                // Apply correct color based on screen
                if (screenName.includes('home')) {
                    activeNav.classList.add('text-indigo-400');
                } else if (screenName.includes('thesaurus')) {
                    activeNav.classList.add('text-indigo-400');
                } else if (screenName.includes('improvisation')) {
                    activeNav.classList.add('text-teal-400');
                } else if (screenName.includes('physical')) {
                    activeNav.classList.add('text-rose-400');
                }
            }

            // Scroll to top
            mainContent.scrollTop = 0;
        }

        // Initialize on load
        loadDatabase();
    </script>
</body>
</html>
